global.PACKER=function(){"use strict";var R=require("fs"),E=require("path"),S=__dirname,n=process.argv[2],e="",O="",r="",i="",c=function(R){console.log("PACKER: "+R)},t=function(E){var n=E.path,e=E.name;return R.statSync(S+"/"+n).isDirectory()===!0&&"."!==e[0]&&"node_modules"!==e&&"not_load"!==e&&"deprecated"!==e&&"_"!==e[0]},o=function(E,S){R.statSync(E).isDirectory()===!0?(R.mkdirSync(S),R.readdirSync(E).forEach(function(R){"."!==R[0]&&o(E+"/"+R,S+"/"+R)})):R.createReadStream(E).pipe(R.createWriteStream(S))},C=function(E,S){R.writeFileSync(E,S)},a=function(E,n){var e,O;if(R.existsSync(E)===!0)for(e=[],R.readdirSync(E).forEach(function(O){var r=E+"/"+O;t({path:r,name:O})===!0?e.push(r):R.statSync(S+"/"+r).isDirectory()!==!0&&n(r)}),O=0;O<e.length;O+=1)a(e[O],n)},A=function(E){R.readdirSync(n).forEach(function(R){"."!==R[0]&&"BROWSER"!==R&&"BROWSER_SECURED"!==R&&"COMMON"!==R&&"SERVER"!==R&&E(n+"/"+R)})},D=function(n){var O=S+"/"+n,r=E.extname(n),i=R.readFileSync(O);".js"===r&&(e+=i+"\n")},_=function(n){var e=S+"/"+n,r=E.extname(n);".js"===r&&(O+=R.readFileSync(e)+"\n")},d=function(n){var e=S+"/"+n,O=E.extname(n),i=R.readFileSync(e);".js"===O&&(r+=i+"\n")},s=function(n){var e=S+"/"+n,O=E.extname(n),r=R.readFileSync(e);".js"===O&&(i+=r+"\n")},m=function(){var R=require(S+"/UPPERCASE/SERVER/node_modules/uglify-js");e=R.minify(e,{fromString:!0,mangle:!0}).code,O=R.minify(O,{fromString:!0,mangle:!0}).code,r=R.minify(r,{fromString:!0,mangle:!0}).code,i=R.minify(i,{fromString:!0,mangle:!0}).code};c("PACKING BOX ["+n+"]..."),c("CREATING FOLDER..."),R.mkdirSync("__PACK/"+n),c("CREATED FOLDER!"),c("LOADING BOX..."),c("LOADING FOR BROWSER..."),a(n+"/BROWSER",D),c("LOADED FOR BROWSER!"),c("LOADING FOR BROWSER SECURED..."),a(n+"/BROWSER_SECURED",_),c("LOADED FOR BROWSER SECURED!"),c("LOADING FOR COMMON..."),a(n+"/COMMON",d),c("LOADED FOR COMMON!"),c("LOADING FOR SERVER..."),a(n+"/SERVER",s),c("LOADED FOR SERVER!"),c("LOADED BOX!"),c("MINIFYING..."),m(),c("MINIFYED!"),c("SAVING BOX..."),A(function(R){o(R,"__PACK/"+n+"/"+R.substring(n.length+1))}),""!==e&&(c("SAVING BROWSER SCRIPT..."),R.mkdirSync("__PACK/"+n+"/BROWSER"),C("__PACK/"+n+"/BROWSER/BROWSER.js",e),c("SAVED BROWSER SCRIPT!")),""!==O&&(c("SAVING BROWSER SECURED SCRIPT..."),R.mkdirSync("__PACK/"+n+"/BROWSER_SECURED"),C("__PACK/"+n+"/BROWSER_SECURED/BROWSER_SECURED.js",O),c("SAVED BROWSER SECURED SCRIPT!")),""!==r&&(c("SAVING COMMON SCRIPT..."),R.mkdirSync("__PACK/"+n+"/COMMON"),C("__PACK/"+n+"/COMMON/COMMON.js",r),c("SAVED COMMON SCRIPT!")),""!==i&&(c("SAVING SERVER SCRIPT..."),R.mkdirSync("__PACK/"+n+"/SERVER"),C("__PACK/"+n+"/SERVER/SERVER.js",i),c("SAVED SERVER SCRIPT!")),R.existsSync(n+"/SERVER/node_modules")===!0&&(c("SAVING NODE MODULES..."),R.existsSync("__PACK/"+n+"/SERVER")===!1&&R.mkdirSync("__PACK/"+n+"/SERVER"),o(n+"/SERVER/node_modules","__PACK/"+n+"/SERVER/node_modules"),c("SAVED NODE MODULES!")),c("SAVED BOX!"),c("PACKED BOX ["+n+"]!")},PACKER();